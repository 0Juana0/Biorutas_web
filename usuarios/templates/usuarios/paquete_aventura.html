{% load static %}
{% load widget_tweaks %}
    <!DOCTYPE html>
    <html lang="es">
    <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Paquete Aventura - BioRutas</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="{% static 'usuarios/navbar.css' %}">
    <link rel="stylesheet" href="{% static 'usuarios/footer.css' %}">
    <link rel="stylesheet" href="{% static 'usuarios/packs.css' %}">
    </head>
    <body>
    <header class="sticky-top bg-white main-header">
    <nav class="navbar navbar-expand-lg navbar-light">
        <div class="container">
            <!-- Logo a la izquierda -->
            <a class="navbar-brand" href="{% url 'usuarios:gracias' %}" >
                <img src="{% static 'usuarios/img/logo.png' %}" alt="Travel Logo" height="40">
            </a>
            
            <!-- Botón móvil -->
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent"
        aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
            </button>
            
            <!-- Menú principal -->
            <div class="collapse navbar-collapse" id="navbarContent">
                <!-- Menú central -->
                <ul class="navbar-nav center-menu">
                    <li class="nav-item">
                        <a class="nav-link" href="{% url 'usuarios:paquetes' %}">Paquetes</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Hoteles</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Vuelos</a>
                    </li>
                </ul>
                
                <!-- Elementos derecha -->
                <ul class="navbar-nav right-elements">
                    <li class="nav-item">
                        <a class="login-btn" href="{% url 'usuarios:login' %}">
                            <i class="bi bi-person-fill"></i> Iniciar sesión
                        </a>
                    </li>
                    <!-- <li class="nav-item dropdown language-selector">
                        <a class="nav-link" href="#" id="languageDropdown" role="button" data-bs-toggle="dropdown">
                            <i class="bi bi-globe me-1"></i> ES
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><a class="dropdown-item active" href="#" data-lang="es">Español</a></li>
                            <li><a class="dropdown-item" href="#" data-lang="en">English</a></li>
                            <li><a class="dropdown-item" href="#" data-lang="fr">Français</a></li>
                        </ul>
                    </li> -->
                </ul>
            </div>
        </div>
    </nav>
</header>

    <div class="container my-5">
    <!-- Título -->
    <h2 class="text-center section-title">Paquete Aventura - Eje Cafetero</h2>

    <!-- Imagen principal -->
    <img id="mainImage" src="{% static 'usuarios/imgpacks/destacado-canopy-torrentismo.jpg' %}" class="main-image" alt="Imagen principal" />

    <!-- Miniaturas -->
    <div class="thumbnail-container">
        <img src="{% static 'usuarios/imgpacks/senderismo.jpg' %}" class="thumb-image" alt="Miniatura 1" onclick="changeImage(this)" />
        <img src="{% static 'usuarios/imgpacks/pisos.jpg' %}" class="thumb-image" alt="Miniatura 2" onclick="changeImage(this)" />
        <img src="{% static 'usuarios/imgpacks/destacado-rafting.jpg' %}" class="thumb-image" alt="Miniatura 3" onclick="changeImage(this)" />
    </div>

    <div class="row mt-5">
        <!-- Sección izquierda -->
        <div class="col-lg-8 pe-lg-5">
        <h4 class="section-title">Descripción</h4>
        <p>Vive un día lleno de adrenalina y conexión con la naturaleza en una experiencia multiaventura diseñada para los amantes de lo extremo. Navega por rápidos emocionantes, vuela entre los árboles en canopy, explora senderos ocultos y termina el día con una fogata bajo las estrellas.</p>

        <h4 class="section-title">¿Qué incluye?</h4>
        <div class="row">
            <div class="col-sm-6">
            <ul class="list-unstyled">
                <li><span class="icon-check">✔</span> Rafting en río clase III-IV (equipo completo incluido)</li>
                <li><span class="icon-check">✔</span> Canopy extremo (5 líneas, hasta 200m de longitud)</li>
                <li><span class="icon-check">✔</span> Senderismo ecológico (cascada escondida o mirador natural)</li>
                <li><span class="icon-check">✔</span> Fogata nocturna con snacks y bebidas tradicionales</li>
                <li><span class="icon-check">✔</span> Almuerzo energizante (comida típica campesina)</li>
                <li><span class="icon-check">✔</span> Guías especializados en deportes extremos</li>
            </ul>
            </div>
            <div class="col-sm-6">
            <ul class="list-unstyled">
                <li><span class="icon-check">✔</span> Transporte (disponible con costo adicional)</li>
                <li><span class="icon-close">✘</span> Hospedaje</li>
            </ul>
            </div>
        </div>

        <h4 class="section-title">Itinerario</h4>
        <ol>
            <li>8:00 AM – Llegada al campamento base (briefing de seguridad)</li>
            <li>9:00 AM – Rafting extremo (1.5 horas de emoción en el río)</li>
            <li>6:00 PM – Fogata + relatos locales (ambiente mágico)</li>
            <li>1:30 PM – Almuerzo campestre (recarga energías)</li>
            <li>3:00 PM – Canopy extremo (vuelos entre montañas)</li>
        </ol>

        <h4 class="section-title">Mapa del recorrido</h4>
        <iframe src="https://maps.google.com/maps?q=quindio&t=&z=10&ie=UTF8&iwloc=&output=embed" width="100%" height="300" style="border:0;" allowfullscreen loading="lazy"></iframe>

        <h4 class="section-title mt-4">Calendario de disponibilidad</h4>
        <input type="date" class="form-control mb-4" />

        <h4 class="section-title">Comentarios</h4>
        <div class="border rounded p-3 mb-3 bg-white">
            <strong>Laura R.</strong><br>
            <div class="star-rating" data-rating="5"></div>
            ¡Hermosa experiencia! Lo recomiendo totalmente.
        </div>
        <div class="border rounded p-3 mb-3 bg-white">
            <strong>Carlos M.</strong><br>
            <div class="star-rating" data-rating="4"></div>
            Todo excelente, aunque llovió un poco.
        </div>
        </div>

        <!-- Formulario reserva tipo panel -->
        <div class="col-lg-4">
        <div class="card p-4 shadow sticky-box" id="reservaBox">
            <h5 class="fw-bold mb-3">Desde ${{ precio_base|floatformat:"0" }}</h5>
            <hr>

            <form method="post" id="formReserva">
            {% csrf_token %}

            <!-- Campo fecha -->
            <label class="form-label">Fecha del tour</label>
            {{ form.fecha_tour|add_class:"form-control mb-3" }}

            <!-- Campo personas -->
            <label class="form-label">Cantidad de personas</label>
            <input type="number" name="cantidad_personas" id="id_cantidad_personas" class="form-control mb-3" min="0" value="0" />

            <!-- Extras -->
            <label class="form-label">Extras:</label>
            <div class="form-check">
                {{ form.extra_guia_bilingue }}
                <label class="form-check-label" for="{{ form.extra_guia_bilingue.id_for_label }}">
                Guía bilingüe (+$20.000)
                </label>
            </div>
            <div class="form-check">
                {{ form.extra_souvenir }}
                <label class="form-check-label" for="{{ form.extra_souvenir.id_for_label }}">
                Souvenir local (+$10.000)
                </label>
            </div>
            <div class="form-check mb-3">
                {{ form.extra_seguro_viaje }}
                <label class="form-check-label" for="{{ form.extra_seguro_viaje.id_for_label }}">
                Seguro de viaje (+$15.000)
                </label>
            </div>

            <!-- Total dinámico -->
            <p>
                <strong>Total estimado:
                <span id="totalDisplay">${{ precio_base|floatformat:"0" }}</span>
                </strong>
            </p>

            <button type="submit" class="btn btn-primary w-100">Reservar ahora</button>
            </form>
        </div>
        </div>

<!-- Notificación en la parte inferior -->
    <div id="notification" class="google-notification">
    <div class="notification-content">
        <span class="notification-icon">✓</span>
        <span class="notification-text">¡Reserva realizada con éxito!</span>
    </div>
    </div>

    <style>
    /* Estilo de la notificación */
    .google-notification {
        position: fixed;
        bottom: -100px; /* Inicialmente oculta */
        left: 50%;
        transform: translateX(-50%);
        background-color: #34a853; /* Verde de Google */
        color: white;
        padding: 12px 24px;
        border-radius: 4px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        z-index: 1000;
        display: flex;
        align-items: center;
        transition: bottom 0.5s ease-in-out;
        max-width: 90%;
    }
    
    .google-notification.show {
        bottom: 20px; /* Posición visible */
    }
    
    .notification-icon {
        font-weight: bold;
        margin-right: 12px;
        font-size: 20px;
    }
    
    .notification-text {
        font-family: 'Roboto', Arial, sans-serif;
        font-size: 14px;
    }
    
    /* Efecto de desvanecimiento al ocultarse */
    @keyframes fadeOut {
        from { opacity: 1; }
        to { opacity: 0; }
    }
    
    .google-notification.hide {
        animation: fadeOut 0.5s ease-in-out forwards;
    }
    </style>

    <script>
    document.getElementById('btnReservar').addEventListener('click', function() {
    const notification = document.getElementById('notification');
    
    // Resetear cualquier animación previa
    notification.classList.remove('show', 'hide');
    void notification.offsetWidth; // Forzar reflow
    
    // Mostrar la notificación
    notification.classList.add('show');
    
    // Ocultar después de 3 segundos
    setTimeout(function() {
        notification.classList.add('hide');
        
        // Remover completamente después de la animación
        setTimeout(function() {
        notification.classList.remove('show', 'hide');
        }, 500);
    }, 3000);
});
</script>


        </div>
        </div>
    </div>
    </div>
    <footer class="bio-footer">
    <div class="footer-container">
        <div class="footer-top">
        <!-- Logo e Info -->
        <div class="footer-brand">
            <img src="{% static 'usuarios/img/logo.png' %}" alt="Biorutas Logo" width="70" height="60">
            <h2 class="footer-logo-text">Biorutas</h2>
        </div>

        <!-- Redes Sociales -->
        <div class="footer-socials">
            <h4>Síguenos</h4>
            <div class="social-icons">
            <a href="https://www.facebook.com/"><i class="bi bi-facebook"></i></a>
            <a href="https://www.instagram.com/"><i class="bi bi-instagram"></i></a>
            <a href="https://twitter.com/"><i class="bi bi-twitter-x"></i></a>
            <a href="https://www.youtube.com/"><i class="bi bi-youtube"></i></a>
            </div>
        </div>
        </div>

        <!-- Menú inferior -->
        <div class="footer-links">
        <div class="footer-col">
            <h3 class="col-title">Menu</h3>
            <ul class="col-list">
            <li><a href="{% url 'usuarios:gracias' %}" class="footer-link">Inicio</a></li>
            <li><a href="{% url 'usuarios:paquetes' %}" class="footer-link">Paquetes</a></li>
            <li><a href="#" class="footer-link">Hoteles</a></li>
            </ul>
        </div>

        <div class="footer-col">
            <h3 class="col-title">Contactanos</h3>
            <ul class="col-list">
            <li><a href="https://wa.me/" class="footer-link">whatsapp</a></li>
            <li><a href="https://www.facebook.com/" class="footer-link">correo</a></li>
            <li><a href="https://www.instagram.com/" class="footer-link">facebook</a></li>
            </ul>
        </div>

        <div class="footer-col">
            <h3 class="col-title">Destacados</h3>
            <ul class="col-list">
            <li><a href="{% url 'usuarios:paquete_aventura' %}" class="footer-link">paquete aventura</a></li>
            <li><a href="{% url 'usuarios:paquete_platino' %}" class="footer-link">paquete platino</a></li>
            <li><a href="{% url 'usuarios:paquete_diamante' %}" class="footer-link">paquete diamante</a></li>
            </ul>
        </div>
        </div>
    </div>
    </footer>
    <script>
    // Precio base viene del contexto
    const precioBase = {{ precio_base }};
    const extras = {
        extra_guia_bilingue: 20000,
        extra_souvenir: 10000,
        extra_seguro_viaje: 15000,
    };

    function calcularTotal() {
        let total = precioBase;
        for (const [id, valor] of Object.entries(extras)) {
        if (document.getElementById(`id_${id}`).checked) total += valor;
        }
        document.getElementById('totalDisplay').textContent = total.toLocaleString('es-CL');
    }

    // Escuchar cambios
    document.querySelectorAll('#formReserva input[type=checkbox]').forEach(el =>
        el.addEventListener('change', calcularTotal)
    );
    // Primer cálculo al cargar
    calcularTotal();
    </script>
    <script>
    function changeImage(element) {
        document.getElementById('mainImage').src = element.src;
    }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"></script>
    <script src="/home/animaciones.js"></script>
    <script>
    const inputCantidad = document.getElementById("id_cantidad_personas");

       inputCantidad.addEventListener("input", function () {
        if (parseInt(this.value) < 0) {
            this.value = 0; // o cambia a 1 si lo prefieres
        }
    });
    </script>
    </body>
    </html>
